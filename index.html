<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 台幣資產反收割監控</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-slate-50 p-4 md:p-8">
    <div class="max-w-6xl mx-auto">
        <header class="flex flex-col md:flex-row justify-between items-center mb-8 bg-white p-6 rounded-xl shadow-sm">
            <div>
                <h1 class="text-2xl font-bold text-slate-800">2026 反收割組合 (台幣版)</h1>
                <p class="text-slate-500">預算規模：NT$ 32,000,000</p>
            </div>
            <div class="mt-4 md:mt-0 text-center md:text-right">
                <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-bold">美元走弱預警：ON</span>
                <p class="text-xs text-slate-400 mt-2">※ 以台幣計價資產自動避險</p>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-sm">
                <h2 class="text-lg font-bold mb-4 text-slate-700">台幣標的即時狀態</h2>
                <div class="overflow-x-auto">
                    <table class="w-full text-left text-sm">
                        <thead class="border-b text-slate-400">
                            <tr>
                                <th class="pb-3">代碼/名稱</th>
                                <th class="pb-3 text-center">目標%</th>
                                <th class="pb-3 text-right">目前權重</th>
                                <th class="pb-3 text-right">再平衡建議</th>
                            </tr>
                        </thead>
                        <tbody id="fund-list">
                            </tbody>
                    </table>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-sm">
                <h2 class="text-lg font-bold mb-6 text-slate-700 text-center">資產權重分布</h2>
                <canvas id="fundChart"></canvas>
                <div class="mt-8">
                    <div class="flex justify-between p-3 bg-slate-50 rounded-lg">
                        <span class="text-slate-500">總市值 (TWD)</span>
                        <span id="total-twd" class="font-bold text-blue-600">NT$ 0</span>
                    </div>
                    <p class="text-[10px] text-slate-400 mt-4 text-center">數據手動模擬 2026 年初市場波動環境</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const config = [
            { name: "00646 元大S&P500", target: 20, color: '#1e40af' },
            { name: "瀚亞印度基金", target: 10, color: '#3b82f6' },
            { name: "00662 富邦Nasdaq", target: 5, color: '#60a5fa' },
            { name: "00697B 美債7-10", target: 15, color: '#94a3b8' },
            { name: "PIMCO實質報酬", target: 15, color: '#cbd5e1' },
            { name: "00635U 元大黃金", target: 12, color: '#fbbf24' },
            { name: "00738U 元大白銀", target: 3, color: '#94a3b8' },
            { name: "00909 數位支付", target: 5, color: '#6366f1' },
            { name: "台幣貨幣基金", target: 10, color: '#10b981' },
            { name: "台幣活定存", target: 5, color: '#059669' }
        ];

        function init() {
            const baseValue = 32000000;
            const list = document.getElementById('fund-list');
            const labels = [];
            const data = [];
            const colors = [];

            config.forEach(item => {
                // 模擬 2026 市場隨機波動後的真實權重
                const drift = (Math.random() * 6 - 3); 
                const currentWeight = item.target + drift;
                const deviation = currentWeight - item.target;

                labels.push(item.name);
                data.push(currentWeight.toFixed(2));
                colors.push(item.color);

                const row = `
                    <tr class="border-b hover:bg-slate-50">
                        <td class="py-4 font-medium text-slate-700">${item.name}</td>
                        <td class="py-4 text-center">${item.target}%</td>
                        <td class="py-4 text-right font-bold">${currentWeight.toFixed(1)}%</td>
                        <td class="py-4 text-right">
                            <span class="px-2 py-1 rounded text-[10px] ${Math.abs(deviation) > 2 ? 'bg-red-100 text-red-600' : 'bg-slate-100 text-slate-400'}">
                                ${Math.abs(deviation) > 2 ? (deviation > 0 ? '應賣出' : '應買入') : '持平'}
                            </span>
                        </td>
                    </tr>
                `;
                list.innerHTML += row;
            });

            document.getElementById('total-twd').innerText = `NT$ ${baseValue.toLocaleString()}`;

            new Chart(document.getElementById('fundChart'), {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{ data: data, backgroundColor: colors }]
                },
                options: { plugins: { legend: { display: false } } }
            });
        }

        window.onload = init;
    </script>
</body>
</html>